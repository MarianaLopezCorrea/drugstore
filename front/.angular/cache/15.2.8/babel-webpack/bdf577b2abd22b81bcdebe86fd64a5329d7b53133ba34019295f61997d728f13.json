{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SellModalComponent_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Total: \", ctx_r0.totalPurchase, \"\");\n  }\n}\nexport class SellModalComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.medicamentId = 0;\n    this.unitQuantity = 0;\n    this.modalVisible = false;\n    this.totalPurchase = 0;\n  }\n  calculateTotal() {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(price => {\n      this.totalPurchase = price * this.unitQuantity;\n    }, error => {\n      console.log(error);\n    });\n  }\n  sellMedicament() {\n    this.closeModal.emit();\n  }\n  onCloseModal() {\n    this.closeModal.emit(); // Emitir el evento de cierre del modal\n  }\n}\n\nSellModalComponent.ɵfac = function SellModalComponent_Factory(t) {\n  return new (t || SellModalComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n};\nSellModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SellModalComponent,\n  selectors: [[\"app-sell-modal\"]],\n  inputs: {\n    medicamentId: \"medicamentId\",\n    modalVisible: \"modalVisible\"\n  },\n  decls: 16,\n  vars: 3,\n  consts: [[1, \"modal\"], [3, \"click\"], [\"for\", \"unitQuantity\"], [\"type\", \"number\", \"id\", \"unitQuantity\", \"name\", \"unitQuantity\", \"ngDefaultControl\", \"\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"]],\n  template: function SellModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\")(1, \"div\", 0)(2, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function SellModalComponent_Template_button_click_2_listener() {\n        return ctx.onCloseModal();\n      });\n      i0.ɵɵtext(3, \"Cerrar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"h2\");\n      i0.ɵɵtext(5, \"Venta de Medicamento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"p\");\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"label\", 2);\n      i0.ɵɵtext(9, \"Cantidad de unidades:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function SellModalComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.unitQuantity = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function SellModalComponent_Template_button_click_11_listener() {\n        return ctx.calculateTotal();\n      });\n      i0.ɵɵtext(12, \"Total de compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, SellModalComponent_p_13_Template, 2, 1, \"p\", 4);\n      i0.ɵɵelementStart(14, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function SellModalComponent_Template_button_click_14_listener() {\n        return ctx.sellMedicament();\n      });\n      i0.ɵɵtext(15, \"Realizar Venta\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"Medicamento ID: \", ctx.medicamentId, \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.unitQuantity);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.totalPurchase !== null);\n    }\n  },\n  dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;IAQQA,yBAAkC;IAAAA,YAA0B;IAAAA,iBAAI;;;;IAA9BA,eAA0B;IAA1BA,0DAA0B;;;ACApE,OAAM,MAAOC,kBAAkB;EAO7BC,YAAoBC,UAAsB;IAAtB,eAAU,GAAVA,UAAU;IAC5B,IAAI,CAACC,YAAY,GAAG,CAAC;IACrB,IAAI,CAACC,YAAY,GAAG,CAAC;IACrB,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,aAAa,GAAG,CAAC;EACxB;EAEAC,cAAc;IACZ,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMC,GAAG,GAAG,iDAAiD,IAAI,CAACN,YAAY,aAAaK,QAAQ,EAAE;IACrG,IAAI,CAACN,UAAU,CAACQ,YAAY,CAACD,GAAG,CAAC,CAACE,SAAS,CACxCC,KAAa,IAAI;MAChB,IAAI,CAACN,aAAa,GAAGM,KAAK,GAAG,IAAI,CAACR,YAAY;IAChD,CAAC,EACAS,KAAK,IAAI;MACRC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAG,cAAc;IACZ,IAAI,CAACC,UAAU,CAACC,IAAI,EAAE;EACxB;EAEAC,YAAY;IACV,IAAI,CAACF,UAAU,CAACC,IAAI,EAAE,CAAC,CAAC;EAC1B;;;AAjCWlB,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAoB;EAAAC;IAAAlB;IAAAE;EAAA;EAAAiB;EAAAC;EAAAC;EAAAC;IAAA;MDR/B1B,4BAAM;MAEUA;QAAA,OAAS2B,kBAAc;MAAA,EAAC;MAAC3B,sBAAM;MAAAA,iBAAS;MAChDA,0BAAI;MAAAA,oCAAoB;MAAAA,iBAAK;MAC7BA,yBAAG;MAAAA,YAAkC;MAAAA,iBAAI;MACzCA,gCAA0B;MAAAA,qCAAqB;MAAAA,iBAAQ;MACvDA,iCAAuG;MAAhEA;QAAA;MAAA,EAA0B;MAAjEA,iBAAuG;MACvGA,kCAAmC;MAA3BA;QAAA,OAAS2B,oBAAgB;MAAA,EAAC;MAAC3B,gCAAe;MAAAA,iBAAS;MAC3DA,iEAAgE;MAChEA,kCAAmC;MAA3BA;QAAA,OAAS2B,oBAAgB;MAAA,EAAC;MAAC3B,+BAAc;MAAAA,iBAAS;;;MALvDA,eAAkC;MAAlCA,+DAAkC;MAEEA,eAA0B;MAA1BA,0CAA0B;MAE7DA,eAA4B;MAA5BA,iDAA4B","names":["i0","SellModalComponent","constructor","apiService","medicamentId","unitQuantity","modalVisible","totalPurchase","calculateTotal","quantity","url","getUnitPrice","subscribe","price","error","console","log","sellMedicament","closeModal","emit","onCloseModal","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.html","C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.ts"],"sourcesContent":["<form>\n    <div class=\"modal\">\n        <button (click)=\"onCloseModal()\">Cerrar</button>\n        <h2>Venta de Medicamento</h2>\n        <p>Medicamento ID: {{ medicamentId }}</p>\n        <label for=\"unitQuantity\">Cantidad de unidades:</label>\n        <input type=\"number\" id=\"unitQuantity\" [(ngModel)]=\"unitQuantity\" name=\"unitQuantity\" ngDefaultControl>\n        <button (click)=\"calculateTotal()\">Total de compra</button>\n        <p *ngIf=\"totalPurchase !== null\">Total: {{ totalPurchase }}</p>\n        <button (click)=\"sellMedicament()\">Realizar Venta</button>\n    </div>\n</form>","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { ApiService } from '../service/api.service';\n\n@Component({\n  selector: 'app-sell-modal',\n  templateUrl: './sell-modal.component.html',\n  styleUrls: ['./sell-modal.component.scss']\n})\nexport class SellModalComponent {\n  @Input() medicamentId: number;\n  @Input() modalVisible: boolean;\n\n  unitQuantity: number;\n  totalPurchase: number;\n\n  constructor(private apiService: ApiService) {\n    this.medicamentId = 0;\n    this.unitQuantity = 0;\n    this.modalVisible = false;\n    this.totalPurchase = 0;\n  }\n\n  calculateTotal() {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(\n      (price: number) => {\n        this.totalPurchase = price * this.unitQuantity;\n      },\n      (error) => {\n        console.log(error);\n      }\n    );\n  }\n\n  sellMedicament() {\n    this.closeModal.emit();\n  }\n  \n  onCloseModal() {\n    this.closeModal.emit(); // Emitir el evento de cierre del modal\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}