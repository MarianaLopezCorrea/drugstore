{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AppComponent = class AppComponent {\n  constructor(apiService, datePipe) {\n    this.apiService = apiService;\n    this.datePipe = datePipe;\n    this.medicaments = [];\n    this.submitted = false;\n    this.formattedManufacturingDates = [];\n    this.formattedExpirationDates = [];\n    this.modalVisible = false;\n    this.medicamentDialog = false;\n    this.selectedMedicamentId = 0;\n  }\n  ngOnInit() {\n    this.getMedicaments();\n  }\n  getMedicaments() {\n    this.apiService.getMedicaments().subscribe(response => {\n      this.medicaments = response;\n      this.formatManufacturingDates();\n      this.formatExpirationDates();\n    }, error => {\n      console.log(error);\n    });\n  }\n  formatManufacturingDates() {\n    this.formattedManufacturingDates = this.medicaments.map(medicament => {\n      return medicament.manufacturingDate ? this.datePipe.transform(medicament.manufacturingDate, 'dd/MM/yyyy') : '';\n    });\n  }\n  formatExpirationDates() {\n    this.formattedExpirationDates = this.medicaments.map(medicament => {\n      return medicament.expirationDate ? this.datePipe.transform(medicament.expirationDate, 'dd/MM/yyyy') : '';\n    });\n  }\n  updateMedicament(medicament) {\n    this.medicamentDialog = true;\n    const url = `http://localhost:8090/api/medicament/${medicament.id}`;\n    this.apiService.updateMedicament(url, medicament).subscribe(response => {\n      console.log('Medicamento actualizado exitosamente');\n    }, error => {\n      console.log('Error al actualizar el medicamento', error);\n    });\n  }\n  deleteMedicament(medicament) {\n    const url = `http://localhost:8090/api/medicament/${medicament.id}`;\n    this.apiService.deleteMedicament(url).subscribe(response => {\n      console.log('Medicamento eliminado exitosamente');\n    }, error => {\n      console.log('Error al eliminar el medicamento', error);\n    });\n  }\n  confirmSale(medicament) {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${medicament.id}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(unitPrice => {\n      console.log('Precio unitario obtenido:', unitPrice);\n      this.selectedMedicamentId = medicament.id; // Actualizar el medicamentId seleccionado\n      this.modalVisible = true;\n    }, error => {\n      console.log('Error al obtener el precio unitario del medicamento', error);\n    });\n  }\n  hideDialog() {\n    this.medicamentDialog = false;\n  }\n  editProduct(medicament) {\n    this.medicament = {\n      ...medicament\n    };\n    this.medicamentDialog = true;\n  }\n  onCloseModal() {\n    this.modalVisible = false;\n  }\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})], AppComponent);\nexport { AppComponent };","map":{"version":3,"mappings":"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","names":["Component","AppComponent","constructor","apiService","datePipe","selectedMedicamentId","ngOnInit","getMedicaments","subscribe","response","medicaments","formatManufacturingDates","formatExpirationDates","error","console","log","formattedManufacturingDates","map","medicament","manufacturingDate","transform","formattedExpirationDates","expirationDate","updateMedicament","medicamentDialog","url","id","deleteMedicament","confirmSale","quantity","getUnitPrice","unitPrice","modalVisible","hideDialog","editProduct","onCloseModal","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\angular\\front\\src\\app\\app.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { MedicamentDto } from './dto/medicament.dto';\nimport { ApiService } from './service/api.service';\nimport { DatePipe } from '@angular/common';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  medicaments: MedicamentDto[] = [];\n  submitted: boolean = false;\n  formattedManufacturingDates: string[] = [];\n  formattedExpirationDates: string[] = [];\n  selectedMedicamentId: number;\n  modalVisible: boolean = false;\n  medicamentDialog: boolean = false;\n\n  constructor(private apiService: ApiService, private datePipe: DatePipe) {\n    this.selectedMedicamentId = 0;\n  }\n\n  ngOnInit() {\n    this.getMedicaments();\n  }\n\n  getMedicaments() {\n    this.apiService.getMedicaments().subscribe(\n      response => {\n        this.medicaments = response;\n        this.formatManufacturingDates();\n        this.formatExpirationDates();\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n\n  formatManufacturingDates() {\n    this.formattedManufacturingDates = this.medicaments.map(medicament => {\n      return medicament.manufacturingDate\n        ? this.datePipe.transform(medicament.manufacturingDate, 'dd/MM/yyyy')!\n        : '';\n    });\n  }\n\n  formatExpirationDates() {\n    this.formattedExpirationDates = this.medicaments.map(medicament => {\n      return medicament.expirationDate\n        ? this.datePipe.transform(medicament.expirationDate, 'dd/MM/yyyy')!\n        : '';\n    });\n  }\n\n  updateMedicament(medicament: MedicamentDto) {\n    this.medicamentDialog = true;\n    const url = `http://localhost:8090/api/medicament/${medicament.id}`;\n    this.apiService.updateMedicament(url, medicament).subscribe(\n      response => {\n        console.log('Medicamento actualizado exitosamente');\n      },\n      error => {\n        console.log('Error al actualizar el medicamento', error);\n      }\n    );\n  }\n\n  deleteMedicament(medicament: MedicamentDto) {\n    const url = `http://localhost:8090/api/medicament/${medicament.id}`;\n    this.apiService.deleteMedicament(url).subscribe(\n      response => {\n        console.log('Medicamento eliminado exitosamente');\n      },\n      error => {\n        console.log('Error al eliminar el medicamento', error);\n      }\n    );\n  }\n\n  confirmSale(medicament: MedicamentDto) {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${medicament.id}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(\n      unitPrice => {\n        console.log('Precio unitario obtenido:', unitPrice);\n        this.selectedMedicamentId = medicament.id; // Actualizar el medicamentId seleccionado\n        this.modalVisible = true;\n      },\n      error => {\n        console.log('Error al obtener el precio unitario del medicamento', error);\n      }\n    );\n  }\n\n  hideDialog() {\n    this.medicamentDialog = false;\n}\n\neditProduct(medicament: MedicamentDto) {\n  this.medicament = { ...medicament };\n  this.medicamentDialog = true;\n}\n\n  onCloseModal() {\n    this.modalVisible = false;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}