{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SellModalComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h3\");\n    i0.ɵɵtext(3, \"Vender Medicamento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\")(6, \"label\", 4);\n    i0.ɵɵtext(7, \"Cantidad:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function SellModalComponent_div_0_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.unitQuantity = $event);\n    })(\"input\", function SellModalComponent_div_0_Template_input_input_8_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.calculateTotal());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\")(10, \"label\", 6);\n    i0.ɵɵtext(11, \"Total de la compra:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function SellModalComponent_div_0_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.totalPurchase = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 8)(14, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function SellModalComponent_div_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onCloseModal());\n    });\n    i0.ɵɵtext(15, \"Cerrar\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.unitQuantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.totalPurchase);\n  }\n}\nexport class SellModalComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.closeModal = new EventEmitter();\n    this.unitQuantity = 0;\n    this.totalPurchase = 0;\n  }\n  calculateTotal() {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(price => {\n      this.totalPurchase = price * this.unitQuantity;\n    }, error => {\n      console.log(error);\n    });\n  }\n  onCloseModal() {\n    this.closeModal.emit();\n  }\n}\nSellModalComponent.ɵfac = function SellModalComponent_Factory(t) {\n  return new (t || SellModalComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n};\nSellModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SellModalComponent,\n  selectors: [[\"app-sell-modal\"]],\n  inputs: {\n    medicamentId: \"medicamentId\",\n    modalVisible: \"modalVisible\"\n  },\n  outputs: {\n    closeModal: \"closeModal\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"modal\", 4, \"ngIf\"], [1, \"modal\"], [1, \"modal-content\"], [1, \"modal-body\"], [\"for\", \"quantity\"], [\"type\", \"number\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"for\", \"total\"], [\"type\", \"number\", \"disabled\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function SellModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, SellModalComponent_div_0_Template, 16, 2, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.modalVisible);\n    }\n  },\n  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAAA,SAAmCA,YAAY,QAAQ,eAAe;;;;;;;;ICAtEC,8BAAwC;IAE5BA,kCAAkB;IAAAA,iBAAK;IAC3BA,8BAAwB;IAEEA,yBAAS;IAAAA,iBAAQ;IACvCA,gCAA6E;IAAxDA;MAAAA;MAAA;MAAA;IAAA,EAA0B;MAAAA;MAAA;MAAA,OAAUA,sCAAgB;IAAA,EAA1B;IAA/CA,iBAA6E;IAEjFA,2BAAK;IACkBA,oCAAmB;IAAAA,iBAAQ;IAC9CA,iCAA4D;IAA9BA;MAAAA;MAAA;MAAA;IAAA,EAA2B;IAAzDA,iBAA4D;IAGhEA,+BAA0B;IACoBA;MAAAA;MAAA;MAAA,OAASA,oCAAc;IAAA,EAAC;IAACA,uBAAM;IAAAA,iBAAS;;;;IAR7DA,eAA0B;IAA1BA,6CAA0B;IAIjBA,eAA2B;IAA3BA,8CAA2B;;;ADDrE,OAAM,MAAOC,kBAAkB;EAS7BC,YAAoBC,UAAsB;IAAtB,eAAU,GAAVA,UAAU;IANpB,eAAU,GAAuB,IAAIJ,YAAY,EAAQ;IAEnE,iBAAY,GAAW,CAAC;IACxB,kBAAa,GAAW,CAAC;EAIzB;EAEAK,cAAc;IACZ,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMC,GAAG,GAAG,iDAAiD,IAAI,CAACC,YAAY,aAAaF,QAAQ,EAAE;IACrG,IAAI,CAACF,UAAU,CAACK,YAAY,CAACF,GAAG,CAAC,CAACG,SAAS,CACxCC,KAAa,IAAI;MAChB,IAAI,CAACC,aAAa,GAAGD,KAAK,GAAG,IAAI,CAACE,YAAY;IAChD,CAAC,EACAC,KAAU,IAAI;MACbC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAG,YAAY;IACV,IAAI,CAACC,UAAU,CAACC,IAAI,EAAE;EACxB;;AA3BWjB,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAkB;EAAAC;IAAAb;IAAAc;EAAA;EAAAC;IAAAL;EAAA;EAAAM;EAAAC;EAAAC;EAAAC;IAAA;MCT/B1B,oEAiBM;;;MAjBcA,uCAAkB","names":["EventEmitter","i0","SellModalComponent","constructor","apiService","calculateTotal","quantity","url","medicamentId","getUnitPrice","subscribe","price","totalPurchase","unitQuantity","error","console","log","onCloseModal","closeModal","emit","selectors","inputs","modalVisible","outputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.ts","C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { ApiService } from '../service/api.service';\nimport { MedicamentDto } from '../dto/medicament.dto';\n\n@Component({\n  selector: 'app-sell-modal',\n  templateUrl: './sell-modal.component.html',\n  styleUrls: ['./sell-modal.component.scss']\n})\nexport class SellModalComponent {\n  @Input() medicamentId!: number;\n  @Input() modalVisible!: boolean;\n  @Output() closeModal: EventEmitter<void> = new EventEmitter<void>();\n\n  unitQuantity: number = 0;\n  totalPurchase: number = 0;\n  medicament!: MedicamentDto;\n\n  constructor(private apiService: ApiService) {\n  }\n\n  calculateTotal() {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(\n      (price: number) => {\n        this.totalPurchase = price * this.unitQuantity;\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n\n  onCloseModal() {\n    this.closeModal.emit();\n  }\n}\n","<div class=\"modal\" *ngIf=\"modalVisible\">\n    <div class=\"modal-content\">\n        <h3>Vender Medicamento</h3>\n        <div class=\"modal-body\">\n        <div>\n            <label for=\"quantity\">Cantidad:</label>\n            <input type=\"number\" [(ngModel)]=\"unitQuantity\" (input)=\"calculateTotal()\" />\n        </div>\n        <div>\n            <label for=\"total\">Total de la compra:</label>\n            <input type=\"number\" disabled [(ngModel)]=\"totalPurchase\" />\n        </div>\n        </div>\n        <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"onCloseModal()\">Cerrar</button>\n        </div>\n    </div>\n</div>\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}