{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"primeng/dialog\";\nfunction SellModalComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 3);\n    i0.ɵɵtext(2, \"Cantidad:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function SellModalComponent_ng_template_1_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.unitQuantity = $event);\n    })(\"input\", function SellModalComponent_ng_template_1_Template_input_input_3_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.calculateTotal());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\")(5, \"label\", 5);\n    i0.ɵɵtext(6, \"Total de la compra:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function SellModalComponent_ng_template_1_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.totalPurchase = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.unitQuantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.totalPurchase);\n  }\n}\nfunction SellModalComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-button\", 7);\n    i0.ɵɵlistener(\"click\", function SellModalComponent_ng_template_2_Template_p_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onCloseModal());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"p-button\", 8);\n    i0.ɵɵlistener(\"click\", function SellModalComponent_ng_template_2_Template_p_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onCloseModal());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nexport class SellModalComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.closeModal = new EventEmitter();\n    this.unitQuantity = 0;\n    this.totalPurchase = 0;\n  }\n  calculateTotal() {\n    const quantity = 1;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(price => {\n      this.totalPurchase = price * this.unitQuantity;\n    }, error => {\n      console.log(error);\n    });\n  }\n  sellMedicament() {\n    const url = `http://localhost:8091/api/sale/confirm_sale/${this.medicamentId}?quantity=${this.unitQuantity}`;\n    this.apiService.sellMedicament(url, this.medicament).subscribe(response => {\n      console.log(\"id: \" + this.medicamentId + \" quantity: \" + this.unitQuantity);\n      console.log('Medicamento vendido exitosamente');\n      this.closeModal.emit();\n    }, error => {\n      console.log(error);\n    });\n  }\n  onCloseModal() {\n    this.closeModal.emit();\n  }\n}\nSellModalComponent.ɵfac = function SellModalComponent_Factory(t) {\n  return new (t || SellModalComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n};\nSellModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SellModalComponent,\n  selectors: [[\"app-sell-modal\"]],\n  inputs: {\n    medicamentId: \"medicamentId\",\n    modalVisible: \"modalVisible\"\n  },\n  outputs: {\n    closeModal: \"closeModal\"\n  },\n  decls: 3,\n  vars: 1,\n  consts: [[\"header\", \"Confirme su compra\", 3, \"visible\", \"visibleChange\"], [\"pTemplate\", \"content\"], [\"pTemplate\", \"footer\"], [\"for\", \"quantity\"], [\"type\", \"number\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"for\", \"total\"], [\"type\", \"number\", \"disabled\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"icon\", \"pi pi-check\", \"label\", \"Confirmar\", \"styleClass\", \"p-button-success\", 3, \"click\"], [\"icon\", \"pi pi-times\", \"label\", \"Cancelar\", \"styleClass\", \"p-button-danger\", 3, \"click\"]],\n  template: function SellModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-dialog\", 0);\n      i0.ɵɵlistener(\"visibleChange\", function SellModalComponent_Template_p_dialog_visibleChange_0_listener($event) {\n        return ctx.modalVisible = $event;\n      });\n      i0.ɵɵtemplate(1, SellModalComponent_ng_template_1_Template, 8, 2, \"ng-template\", 1);\n      i0.ɵɵtemplate(2, SellModalComponent_ng_template_2_Template, 2, 0, \"ng-template\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"visible\", ctx.modalVisible);\n    }\n  },\n  dependencies: [i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgModel, i3.PrimeTemplate, i4.Button, i5.Dialog],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAAA,SAAmCA,YAAY,QAAQ,eAAe;;;;;;;;;;ICE9DC,2BAAK;IACqBA,yBAAS;IAAAA,iBAAQ;IACvCA,gCAA6E;IAAxDA;MAAAA;MAAA;MAAA;IAAA,EAA0B;MAAAA;MAAA;MAAA,OAAUA,sCAAgB;IAAA,EAA1B;IAA/CA,iBAA6E;IAEjFA,2BAAK;IACkBA,mCAAmB;IAAAA,iBAAQ;IAC9CA,gCAA4D;IAA9BA;MAAAA;MAAA;MAAA;IAAA,EAA2B;IAAzDA,iBAA4D;;;;IAJvCA,eAA0B;IAA1BA,6CAA0B;IAIjBA,eAA2B;IAA3BA,8CAA2B;;;;;;IAIzDA,mCAAuG;IAA7FA;MAAAA;MAAA;MAAA,OAASA,oCAAc;IAAA,EAAC;IAAqEA,iBAAW;IAClHA,mCAAoG;IAA1FA;MAAAA;MAAA;MAAA,OAASA,oCAAc;IAAA,EAAC;IAAkEA,iBAAW;;;ADF3H,OAAM,MAAOC,kBAAkB;EAS7BC,YAAoBC,UAAsB;IAAtB,eAAU,GAAVA,UAAU;IANpB,eAAU,GAAuB,IAAIJ,YAAY,EAAQ;IAEnE,iBAAY,GAAW,CAAC;IACxB,kBAAa,GAAW,CAAC;EAIzB;EAEAK,cAAc;IACZ,MAAMC,QAAQ,GAAG,CAAC;IAClB,MAAMC,GAAG,GAAG,iDAAiD,IAAI,CAACC,YAAY,aAAaF,QAAQ,EAAE;IACrG,IAAI,CAACF,UAAU,CAACK,YAAY,CAACF,GAAG,CAAC,CAACG,SAAS,CACxCC,KAAa,IAAI;MAChB,IAAI,CAACC,aAAa,GAAGD,KAAK,GAAG,IAAI,CAACE,YAAY;IAChD,CAAC,EACAC,KAAU,IAAI;MACbC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAG,cAAc;IACZ,MAAMV,GAAG,GAAG,+CAA+C,IAAI,CAACC,YAAY,aAAa,IAAI,CAACK,YAAY,EAAE;IAC5G,IAAI,CAACT,UAAU,CAACa,cAAc,CAACV,GAAG,EAAE,IAAI,CAACW,UAAU,CAAC,CAACR,SAAS,CAC3DS,QAAa,IAAI;MAChBJ,OAAO,CAACC,GAAG,CAAC,MAAM,GAAG,IAAI,CAACR,YAAY,GAAG,aAAa,GAAG,IAAI,CAACK,YAAY,CAAC;MAC3EE,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;MAC/C,IAAI,CAACI,UAAU,CAACC,IAAI,EAAE;IACxB,CAAC,EACAP,KAAU,IAAI;MACbC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAQ,YAAY;IACV,IAAI,CAACF,UAAU,CAACC,IAAI,EAAE;EACxB;;AAzCWnB,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAqB;EAAAC;IAAAhB;IAAAiB;EAAA;EAAAC;IAAAN;EAAA;EAAAO;EAAAC;EAAAC;EAAAC;IAAA;MCX/B7B,mCAAiE;MAA3BA;QAAA;MAAA,EAA0B;MAC5DA,mFASkB;MACdA,mFAGU;MAClBA,iBAAW;;;MAf2BA,0CAA0B","names":["EventEmitter","i0","SellModalComponent","constructor","apiService","calculateTotal","quantity","url","medicamentId","getUnitPrice","subscribe","price","totalPurchase","unitQuantity","error","console","log","sellMedicament","medicament","response","closeModal","emit","onCloseModal","selectors","inputs","modalVisible","outputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.ts","C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { ApiService } from '../service/api.service';\nimport { MedicamentDto } from '../dto/medicament.dto';\n\n\n\n@Component({\n  selector: 'app-sell-modal',\n  templateUrl: './sell-modal.component.html',\n  styleUrls: ['./sell-modal.component.scss']\n})\nexport class SellModalComponent {\n  @Input() medicamentId!: number;\n  @Input() modalVisible!: boolean;\n  @Output() closeModal: EventEmitter<void> = new EventEmitter<void>();\n\n  unitQuantity: number = 0;\n  totalPurchase: number = 0;\n  medicament!: MedicamentDto;\n\n  constructor(private apiService: ApiService) {\n  }\n\n  calculateTotal() {\n    const quantity = 1;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(\n      (price: number) => {\n        this.totalPurchase = price * this.unitQuantity;\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n\n  sellMedicament() {\n    const url = `http://localhost:8091/api/sale/confirm_sale/${this.medicamentId}?quantity=${this.unitQuantity}`;\n    this.apiService.sellMedicament(url, this.medicament).subscribe(\n      (response: any) => {\n        console.log(\"id: \" + this.medicamentId + \" quantity: \" + this.unitQuantity);\n        console.log('Medicamento vendido exitosamente');\n        this.closeModal.emit();\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n\n  onCloseModal() {\n    this.closeModal.emit();\n  }\n}\n","<p-dialog header=\"Confirme su compra\" [(visible)]=\"modalVisible\">\n    <ng-template pTemplate=\"content\">\n        <div>\n            <label for=\"quantity\">Cantidad:</label>\n            <input type=\"number\" [(ngModel)]=\"unitQuantity\" (input)=\"calculateTotal()\" />\n        </div>\n        <div>\n            <label for=\"total\">Total de la compra:</label>\n            <input type=\"number\" disabled [(ngModel)]=\"totalPurchase\" />\n        </div>\n        </ng-template>\n        <ng-template pTemplate=\"footer\">\n            <p-button (click)=\"onCloseModal()\"  icon=\"pi pi-check\" label=\"Confirmar\" styleClass=\"p-button-success\"></p-button>\n            <p-button (click)=\"onCloseModal()\" icon=\"pi pi-times\" label=\"Cancelar\" styleClass=\"p-button-danger\"></p-button>\n    </ng-template>\n</p-dialog>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}