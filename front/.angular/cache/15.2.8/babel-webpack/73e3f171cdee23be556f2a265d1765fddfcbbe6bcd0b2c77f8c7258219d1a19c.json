{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SellModalComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h2\");\n    i0.ɵɵtext(3, \"Venta de Medicamento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 3)(5, \"label\", 4);\n    i0.ɵɵtext(6, \"Cantidad:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function SellModalComponent_div_0_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.unitQuantity = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 3)(9, \"label\", 6);\n    i0.ɵɵtext(10, \"Total de la Venta:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 8)(13, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function SellModalComponent_div_0_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.calculateTotal());\n    });\n    i0.ɵɵtext(14, \"Calcular Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function SellModalComponent_div_0_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.sellMedicament());\n    });\n    i0.ɵɵtext(16, \"Vender Medicamento\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function SellModalComponent_div_0_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onCloseModal());\n    });\n    i0.ɵɵtext(18, \"Cerrar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.unitQuantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", ctx_r0.totalPurchase);\n  }\n}\nexport class SellModalComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.closeModal = new EventEmitter();\n    this.unitQuantity = 0;\n    this.totalPurchase = 0;\n    this.medicament = {};\n  }\n  ngOnChanges() {\n    this.getMedicament();\n  }\n  getMedicament() {\n    // Realiza una llamada al servicio para obtener el medicamento por el ID\n    const url = `http://localhost:8090/api/medicament/${this.medicamentId}`;\n    this.apiService.getMedicament(url).subscribe(response => {\n      this.medicament = response;\n    }, error => {\n      console.log(error);\n    });\n  }\n  calculateTotal() {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(price => {\n      this.totalPurchase = price * this.unitQuantity;\n    }, error => {\n      console.log(error);\n    });\n  }\n  onCloseModal() {\n    this.closeModal.emit();\n  }\n  sellMedicament() {\n    // Aquí puedes agregar la lógica para realizar la venta del medicamento\n  }\n}\nSellModalComponent.ɵfac = function SellModalComponent_Factory(t) {\n  return new (t || SellModalComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n};\nSellModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SellModalComponent,\n  selectors: [[\"app-sell-modal\"]],\n  inputs: {\n    medicamentId: \"medicamentId\",\n    modalVisible: \"modalVisible\"\n  },\n  outputs: {\n    closeModal: \"closeModal\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"modal\", 4, \"ngIf\"], [1, \"modal\"], [1, \"modal-content\"], [1, \"form-group\"], [\"for\", \"quantityInput\"], [\"type\", \"number\", \"id\", \"quantityInput\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"totalInput\"], [\"type\", \"text\", \"id\", \"totalInput\", \"readonly\", \"\", 3, \"value\"], [1, \"button-group\"], [1, \"btn\", 3, \"click\"], [1, \"close-btn\", 3, \"click\"]],\n  template: function SellModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, SellModalComponent_div_0_Template, 19, 2, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.modalVisible);\n    }\n  },\n  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAAA,SAAmCA,YAAY,QAAQ,eAAe;;;;;;;;ICAtEC,8BAAwC;IAE5BA,oCAAoB;IAAAA,iBAAK;IAC7BA,8BAAwB;IACGA,yBAAS;IAAAA,iBAAQ;IAC5CA,gCAAmE;IAA3BA;MAAAA;MAAA;MAAA;IAAA,EAA0B;IAAlEA,iBAAmE;IAEnEA,8BAAwB;IACAA,mCAAkB;IAAAA,iBAAQ;IAClDA,4BAAoE;IACpEA,iBAAM;IACNA,+BAA0B;IACNA;MAAAA;MAAA;MAAA,OAASA,sCAAgB;IAAA,EAAC;IAACA,+BAAc;IAAAA,iBAAS;IACtEA,kCAA+C;IAA3BA;MAAAA;MAAA;MAAA,OAASA,sCAAgB;IAAA,EAAC;IAACA,mCAAkB;IAAAA,iBAAS;IAE1EA,mCAAmD;IAAzBA;MAAAA;MAAA;MAAA,OAASA,oCAAc;IAAA,EAAC;IAACA,uBAAM;IAAAA,iBAAS;;;;IAV1BA,eAA0B;IAA1BA,6CAA0B;IAI/BA,eAAuB;IAAvBA,4CAAuB;;;ADAlE,OAAM,MAAOC,kBAAkB;EAS7BC,YAAoBC,UAAsB;IAAtB,eAAU,GAAVA,UAAU;IANpB,eAAU,GAAuB,IAAIJ,YAAY,EAAQ;IAOjE,IAAI,CAACK,YAAY,GAAG,CAAC;IACrB,IAAI,CAACC,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,UAAU,GAAG,EAAmB;EACvC;EAEAC,WAAW;IACT,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAA,aAAa;IACX;IACA,MAAMC,GAAG,GAAG,wCAAwC,IAAI,CAACC,YAAY,EAAE;IACvE,IAAI,CAACP,UAAU,CAACK,aAAa,CAACC,GAAG,CAAC,CAACE,SAAS,CACzCC,QAAuB,IAAI;MAC1B,IAAI,CAACN,UAAU,GAAGM,QAAQ;IAC5B,CAAC,EACAC,KAAK,IAAI;MACRC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAG,cAAc;IACZ,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMR,GAAG,GAAG,iDAAiD,IAAI,CAACC,YAAY,aAAaO,QAAQ,EAAE;IACrG,IAAI,CAACd,UAAU,CAACe,YAAY,CAACT,GAAG,CAAC,CAACE,SAAS,CACxCQ,KAAa,IAAI;MAChB,IAAI,CAACd,aAAa,GAAGc,KAAK,GAAG,IAAI,CAACf,YAAY;IAChD,CAAC,EACAS,KAAK,IAAI;MACRC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAO,YAAY;IACV,IAAI,CAACC,UAAU,CAACC,IAAI,EAAE;EACxB;EAEAC,cAAc;IACZ;EAAA;;AAlDStB,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAuB;EAAAC;IAAAf;IAAAgB;EAAA;EAAAC;IAAAN;EAAA;EAAAO;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCT/BhC,oEAiBM;;;MAjBAA,uCAAkB","names":["EventEmitter","i0","SellModalComponent","constructor","apiService","unitQuantity","totalPurchase","medicament","ngOnChanges","getMedicament","url","medicamentId","subscribe","response","error","console","log","calculateTotal","quantity","getUnitPrice","price","onCloseModal","closeModal","emit","sellMedicament","selectors","inputs","modalVisible","outputs","features","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.ts","C:\\angular\\front\\src\\app\\sell-modal\\sell-modal.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { ApiService } from '../service/api.service';\nimport { MedicamentDto } from '../dto/medicament.dto';\n\n@Component({\n  selector: 'app-sell-modal',\n  templateUrl: './sell-modal.component.html',\n  styleUrls: ['./sell-modal.component.scss']\n})\nexport class SellModalComponent {\n  @Input() medicamentId: number;\n  @Input() modalVisible: boolean;\n  @Output() closeModal: EventEmitter<void> = new EventEmitter<void>();\n\n  unitQuantity: number;\n  totalPurchase: number;\n  medicament: MedicamentDto;\n\n  constructor(private apiService: ApiService) {\n    this.unitQuantity = 0;\n    this.totalPurchase = 0;\n    this.medicament = {} as MedicamentDto;\n  }\n\n  ngOnChanges() {\n    this.getMedicament();\n  }\n\n  getMedicament() {\n    // Realiza una llamada al servicio para obtener el medicamento por el ID\n    const url = `http://localhost:8090/api/medicament/${this.medicamentId}`;\n    this.apiService.getMedicament(url).subscribe(\n      (response: MedicamentDto) => {\n        this.medicament = response;\n      },\n      (error) => {\n        console.log(error);\n      }\n    );\n  }\n\n  calculateTotal() {\n    const quantity = 10;\n    const url = `http://localhost:8091/api/sale/get_unit_price/${this.medicamentId}?quantity=${quantity}`;\n    this.apiService.getUnitPrice(url).subscribe(\n      (price: number) => {\n        this.totalPurchase = price * this.unitQuantity;\n      },\n      (error) => {\n        console.log(error);\n      }\n    );\n  }\n\n  onCloseModal() {\n    this.closeModal.emit();\n  }\n\n  sellMedicament() {\n    // Aquí puedes agregar la lógica para realizar la venta del medicamento\n  }\n}\n","<div *ngIf=\"modalVisible\" class=\"modal\">\n    <div class=\"modal-content\">\n        <h2>Venta de Medicamento</h2>\n        <div class=\"form-group\">\n        <label for=\"quantityInput\">Cantidad:</label>\n        <input type=\"number\" id=\"quantityInput\" [(ngModel)]=\"unitQuantity\">\n        </div>\n        <div class=\"form-group\">\n        <label for=\"totalInput\">Total de la Venta:</label>\n        <input type=\"text\" id=\"totalInput\" [value]=\"totalPurchase\" readonly>\n        </div>\n        <div class=\"button-group\">\n        <button class=\"btn\" (click)=\"calculateTotal()\">Calcular Total</button>\n        <button class=\"btn\" (click)=\"sellMedicament()\">Vender Medicamento</button>\n        </div>\n        <button class=\"close-btn\" (click)=\"onCloseModal()\">Cerrar</button>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}